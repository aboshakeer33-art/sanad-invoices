<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ø³Ù†Ø¯ Ù„Ù„Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª | Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØ§ØªÙŠØ±</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      background: #0a0e17; 
      color: #e2e8f0;
      min-height: 100vh;
    }
    
    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .header { 
      background: linear-gradient(135deg, #1e3a5f, #0f172a);
      padding: 30px 20px; 
      text-align: center;
      border-bottom: 4px solid #d4af37;
    }
    
    .header h1 { 
      color: #d4af37; 
      font-size: 38px; 
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .header .details {
      color: #e2e8f0;
      font-size: 17px;
      line-height: 2;
      margin: 15px 0;
    }
    
    .header .contact {
      color: #94a3b8;
      margin-top: 15px;
      font-size: 16px;
    }
    
    /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
    .nav { 
      display: flex; 
      background: #1e293b;
      border-bottom: 2px solid #334155;
      overflow-x: auto;
    }
    
    .nav button {
      flex: 1;
      background: transparent;
      color: #94a3b8;
      border: none;
      border-bottom: 3px solid transparent;
      padding: 18px 20px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      white-space: nowrap;
      min-width: 120px;
    }
    
    .nav button:hover { 
      color: #d4af37; 
      background: rgba(212, 175, 55, 0.1);
    }
    
    .nav button.active { 
      color: #d4af37; 
      border-bottom-color: #d4af37;
      background: rgba(212, 175, 55, 0.15);
    }
    
    /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
    .content { 
      padding: 25px; 
      max-width: 1200px; 
      margin: 0 auto; 
    }
    
    .page { display: none; }
    .page.active { display: block; animation: fadeIn 0.3s; }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    .box {
      background: linear-gradient(145deg, #1e293b, #0f172a);
      border: 1px solid #334155;
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    
    .box h2 {
      color: #d4af37;
      margin-bottom: 20px;
      font-size: 22px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    /* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
    input, select {
      width: 100%;
      padding: 14px 18px;
      margin: 10px 0;
      background: #0f172a;
      border: 2px solid #334155;
      color: #e2e8f0;
      border-radius: 10px;
      font-size: 16px;
      font-family: inherit;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: #d4af37;
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
    }
    
    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 28px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
      font-family: inherit;
      transition: all 0.3s;
    }
    
    .btn-gold {
      background: linear-gradient(135deg, #d4af37, #b8941f);
      color: #0f172a;
    }
    
    .btn-gold:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
    }
    
    .btn-gray {
      background: #334155;
      color: #e2e8f0;
    }
    
    .btn-red {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }
    
    /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
    .table-wrap {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid #334155;
      background: #0f172a;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th {
      background: linear-gradient(135deg, #1e3a5f, #1e293b);
      color: #d4af37;
      padding: 16px;
      text-align: right;
      font-weight: bold;
    }
    
    td {
      padding: 14px 16px;
      border-bottom: 1px solid #334155;
    }
    
    tr:hover { background: rgba(212, 175, 55, 0.05); }
    
    /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .stat-box {
      background: linear-gradient(145deg, #1e293b, #0f172a);
      border: 1px solid #334155;
      border-radius: 16px;
      padding: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #d4af37, #fbbf24);
    }
    
    .stat-box .num {
      font-size: 42px;
      color: #d4af37;
      font-weight: 900;
      margin: 15px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .stat-box .label {
      color: #64748b;
      font-size: 16px;
      font-weight: 600;
    }
    
    /* Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ */
    .total-box {
      background: linear-gradient(135deg, #1e3a5f, #0f172a);
      border: 2px solid #d4af37;
      border-radius: 12px;
      padding: 25px;
      margin-top: 20px;
      font-size: 24px;
      font-weight: bold;
      color: #d4af37;
      text-align: center;
    }
    
    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
    .quick-btns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .quick-btn {
      background: linear-gradient(145deg, #1e293b, #0f172a);
      border: 2px solid #334155;
      border-radius: 16px;
      padding: 35px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .quick-btn:hover {
      border-color: #d4af37;
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(212, 175, 55, 0.2);
    }
    
    .quick-btn .icon {
      font-size: 45px;
      margin-bottom: 15px;
    }
    
    .quick-btn .text {
      color: #d4af37;
      font-weight: bold;
      font-size: 18px;
    }
    
    /* ÙØ§Ø±Øº */
    .empty {
      text-align: center;
      padding: 50px;
      color: #64748b;
      font-size: 18px;
    }
    
    /* Ù„Ù„Ø¬ÙˆØ§Ù„ */
    @media (max-width: 768px) {
      .header h1 { font-size: 28px; }
      .header .details { font-size: 15px; }
      .nav button { font-size: 14px; padding: 15px 10px; min-width: 100px; }
      .stats { grid-template-columns: 1fr; }
      .quick-btns { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <div class="header">
    <h1>ğŸšª Ø³Ù†Ø¯ Ù„Ù„Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</h1>
    <div class="details">
      Ù…Ø³ÙƒØ§Øª Ø£Ø¨ÙˆØ§Ø¨ ÙØ§Ø®Ø±Ø© | ÙƒÙˆØ§Ù„ÙŠÙ† Ø£Ø¨ÙˆØ§Ø¨ Ø®Ø´Ø¨ ÙˆØ­Ø¯ÙŠØ¯<br>
      ÙƒÙˆØ§Ù„ÙŠÙ† ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø°ÙƒÙŠØ© Ø¨ØµÙ…Ø© | Ù…ÙØµÙ„Ø§Øª Ø¯ÙˆÙ„Ø§Ø¨ Ù…Ø·Ø¨Ø®<br>
      Ø¬Ù…ÙŠØ¹ Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ø£Ù„Ù…Ù†ÙŠÙˆÙ… | Ø¬Ù…Ù„Ø© ÙˆÙ‚Ø·Ø§Ø¹ÙŠ
    </div>
    <div class="contact">
      ğŸ“ Ø§Ù„Ø®Ø±Ø·ÙˆÙ… Ø¨Ø­Ø±ÙŠ | ğŸ“ +249913678918
    </div>
  </div>

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
  <div class="nav">
    <button onclick="showPage('home')" id="tab-home" class="active">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button onclick="showPage('invoice')" id="tab-invoice">ğŸ“ ÙØ§ØªÙˆØ±Ø©</button>
    <button onclick="showPage('items')" id="tab-items">ğŸ“¦ Ø§Ù„Ø¨Ù†ÙˆØ¯</button>
    <button onclick="showPage('customers')" id="tab-customers">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
    <button onclick="showPage('reports')" id="tab-reports">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
  </div>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
  <div class="content">

    <!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="page-home" class="page active">
      <div class="stats">
        <div class="stat-box">
          <div class="label">ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
          <div class="num" id="home-sales">0</div>
          <div class="label">Ø¬Ù†ÙŠÙ‡ Ø³ÙˆØ¯Ø§Ù†ÙŠ</div>
        </div>
        <div class="stat-box">
          <div class="label">ğŸ§¾ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</div>
          <div class="num" id="home-invoices">0</div>
          <div class="label">ÙØ§ØªÙˆØ±Ø©</div>
        </div>
        <div class="stat-box">
          <div class="label">ğŸ“¦ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
          <div class="num" id="home-items">0</div>
          <div class="label">Ø¨Ù†Ø¯</div>
        </div>
      </div>

      <div class="box">
        <h2>âš¡ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
        <div class="quick-btns">
          <div class="quick-btn" onclick="showPage('invoice')">
            <div class="icon">ğŸ“</div>
            <div class="text">ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
          </div>
          <div class="quick-btn" onclick="showPage('items')">
            <div class="icon">ğŸ“¦</div>
            <div class="text">Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</div>
          </div>
          <div class="quick-btn" onclick="showPage('customers')">
            <div class="icon">ğŸ‘¤</div>
            <div class="text">Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</div>
          </div>
          <div class="quick-btn" onclick="showPage('reports')">
            <div class="icon">ğŸ“Š</div>
            <div class="text">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
          </div>
        </div>
      </div>

      <div class="box">
        <h2>ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h2>
        <div id="home-list" class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ø¨Ø¹Ø¯</div>
      </div>
    </div>

    <!-- ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© -->
    <div id="page-invoice" class="page">
      <div class="box">
        <h2>ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h2>
        <select id="inv-customer"><option>Ø¹Ù…ÙŠÙ„ Ù†Ù‚Ø¯ÙŠ</option></select>
        <input type="date" id="inv-date">
      </div>

      <div class="box">
        <h2>â• Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯ Ù„Ù„ÙØ§ØªÙˆØ±Ø©</h2>
        <select id="inv-item"><option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ø¯ --</option></select>
        <input type="number" id="inv-qty" value="1" min="1" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
        <input type="number" id="inv-price" placeholder="Ø§Ù„Ø³Ø¹Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - ÙŠØ³ØªØ®Ø¯Ù… Ø³Ø¹Ø± Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ)">
        <button class="btn btn-gold" onclick="addItemToInvoice()">â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„ÙØ§ØªÙˆØ±Ø©</button>
      </div>

      <div class="box" id="invoice-items-box" style="display:none;">
        <h2>ğŸ›’ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h2>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø¨Ù†Ø¯</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                <th>Ø­Ø°Ù</th>
              </tr>
            </thead>
            <tbody id="invoice-items"></tbody>
          </table>
        </div>
        <div class="total-box">
          Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="invoice-total">0</span> Ø¬Ù†ÙŠÙ‡
        </div>
        <div style="margin-top: 20px;">
          <button class="btn btn-gold" onclick="saveInvoice()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
          <button class="btn btn-gray" onclick="clearInvoice()">ğŸ—‘ï¸ ØªÙØ±ÙŠØº</button>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„Ø¨Ù†ÙˆØ¯ -->
    <div id="page-items" class="page">
      <div class="box">
        <h2>ğŸ“¦ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯ Ø¬Ø¯ÙŠØ¯</h2>
        <input type="text" id="new-item-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯ (Ù…Ø«Ø§Ù„: Ù…ÙØµÙ„Ø© Ø£Ù„Ù…Ù†ÙŠÙˆÙ…)">
        <input type="number" id="new-item-price" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡">
        <input type="number" id="new-item-stock" value="0" placeholder="Ø§Ù„Ù…Ø®Ø²ÙˆÙ†">
        <button class="btn btn-gold" onclick="addNewItem()">â• Ø­ÙØ¸ Ø§Ù„Ø¨Ù†Ø¯</button>
      </div>

      <div class="box">
        <h2>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù†ÙˆØ¯</h2>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø¨Ù†Ø¯</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>
                <th>Ø­Ø°Ù</th>
              </tr>
            </thead>
            <tbody id="items-list"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
    <div id="page-customers" class="page">
      <div class="box">
        <h2>ğŸ‘¤ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h2>
        <input type="text" id="new-cust-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
        <input type="text" id="new-cust-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
        <button class="btn btn-gold" onclick="addNewCustomer()">â• Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
      </div>

      <div class="box">
        <h2>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>Ø­Ø°Ù</th>
              </tr>
            </thead>
            <tbody id="customers-list"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
    <div id="page-reports" class="page">
      <div class="stats">
        <div class="stat-box">
          <div class="label">ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
          <div class="num" id="rep-sales">0</div>
        </div>
        <div class="stat-box">
          <div class="label">ğŸ§¾ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</div>
          <div class="num" id="rep-count">0</div>
        </div>
        <div class="stat-box">
          <div class="label">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø©</div>
          <div class="num" id="rep-avg">0</div>
        </div>
      </div>

      <div class="box">
        <h2>ğŸ“Š Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h2>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø±Ù‚Ù…</th>
                <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
              </tr>
            </thead>
            <tbody id="rep-list"></tbody>
          </table>
        </div>
      </div>
    </div>

  </div>

  <script>
    // ========== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==========
    var allItems = JSON.parse(localStorage.getItem('sanad_items')) || [];
    var allCustomers = JSON.parse(localStorage.getItem('sanad_customers')) || [{name:'Ø¹Ù…ÙŠÙ„ Ù†Ù‚Ø¯ÙŠ', phone:'-'}];
    var allInvoices = JSON.parse(localStorage.getItem('sanad_invoices')) || [];
    var currentItems = [];

    // ========== Ø§Ù„ØªÙ†Ù‚Ù„ ==========
    function showPage(page) {
      // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª
      var pages = document.querySelectorAll('.page');
      for(var i=0; i<pages.length; i++) {
        pages[i].classList.remove('active');
      }
      
      var tabs = document.querySelectorAll('.nav button');
      for(var i=0; i<tabs.length; i++) {
        tabs[i].classList.remove('active');
      }
      
      // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
      document.getElementById('page-' + page).classList.add('active');
      document.getElementById('tab-' + page).classList.add('active');
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      if(page == 'home') updateHome();
      if(page == 'invoice') {
        updateItemSelect();
        updateCustSelect();
        document.getElementById('inv-date').valueAsDate = new Date();
      }
      if(page == 'items') showItems();
      if(page == 'customers') showCustomers();
      if(page == 'reports') showReports();
    }

    // ========== Ø§Ù„Ø¨Ù†ÙˆØ¯ ==========
    function addNewItem() {
      var name = document.getElementById('new-item-name').value.trim();
      var price = parseFloat(document.getElementById('new-item-price').value) || 0;
      var stock = parseInt(document.getElementById('new-item-stock').value) || 0;
      
      if(!name || price <= 0) {
        alert('âŒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯ ÙˆØ§Ù„Ø³Ø¹Ø±');
        return;
      }
      
      allItems.push({
        id: Date.now(),
        name: name,
        price: price,
        stock: stock
      });
      
      localStorage.setItem('sanad_items', JSON.stringify(allItems));
      
      document.getElementById('new-item-name').value = '';
      document.getElementById('new-item-price').value = '';
      document.getElementById('new-item-stock').value = '0';
      
      showItems();
      alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ù†Ø¯: ' + name);
    }

    function showItems() {
      var tbody = document.getElementById('items-list');
      if(allItems.length == 0) {
        tbody.innerHTML = '<tr><td colspan="4" class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù†ÙˆØ¯</td></tr>';
        return;
      }
      
      var html = '';
      for(var i=0; i<allItems.length; i++) {
        var item = allItems[i];
        html += '<tr>' +
          '<td><b>' + item.name + '</b></td>' +
          '<td style="color:#d4af37; font-weight:bold;">' + item.price + ' Ø¬Ù†ÙŠÙ‡</td>' +
          '<td>' + item.stock + '</td>' +
          '<td><button class="btn btn-red" onclick="deleteItem(' + item.id + ')">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>' +
        '</tr>';
      }
      tbody.innerHTML = html;
    }

    function deleteItem(id) {
      if(!confirm('Ø­Ø°Ù Ø§Ù„Ø¨Ù†Ø¯ØŸ')) return;
      var newItems = [];
      for(var i=0; i<allItems.length; i++) {
        if(allItems[i].id != id) newItems.push(allItems[i]);
      }
      allItems = newItems;
      localStorage.setItem('sanad_items', JSON.stringify(allItems));
      showItems();
    }

    function updateItemSelect() {
      var select = document.getElementById('inv-item');
      var html = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ø¯ --</option>';
      for(var i=0; i<allItems.length; i++) {
        html += '<option value="' + allItems[i].id + '">' + 
          allItems[i].name + ' - ' + allItems[i].price + ' Ø¬Ù†ÙŠÙ‡</option>';
      }
      select.innerHTML = html;
    }

    // ========== Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ==========
    function addNewCustomer() {
      var name = document.getElementById('new-cust-name').value.trim();
      var phone = document.getElementById('new-cust-phone').value.trim();
      
      if(!name) {
        alert('âŒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„');
        return;
      }
      
      allCustomers.push({
        id: Date.now(),
        name: name,
        phone: phone || '-'
      });
      
      localStorage.setItem('sanad_customers', JSON.stringify(allCustomers));
      
      document.getElementById('new-cust-name').value = '';
      document.getElementById('new-cust-phone').value = '';
      
      showCustomers();
      alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„: ' + name);
    }

    function showCustomers() {
      var tbody = document.getElementById('customers-list');
      var list = [];
      for(var i=1; i<allCustomers.length; i++) {
        list.push(allCustomers[i]);
      }
      
      if(list.length == 0) {
        tbody.innerHTML = '<tr><td colspan="3" class="empty">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡</td></tr>';
        return;
      }
      
      var html = '';
      for(var i=0; i<list.length; i++) {
        html += '<tr>' +
          '<td><b>' + list[i].name + '</b></td>' +
          '<td>' + list[i].phone + '</td>' +
          '<td><button class="btn btn-red" onclick="deleteCustomer(' + list[i].id + ')">ğŸ—‘ï¸ Ø­Ø°Ù</button></td>' +
        '</tr>';
      }
      tbody.innerHTML = html;
    }

    function deleteCustomer(id) {
      if(!confirm('Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ')) return;
      var newCust = [];
      for(var i=0; i<allCustomers.length; i++) {
        if(allCustomers[i].id != id) newCust.push(allCustomers[i]);
      }
      allCustomers = newCust;
      localStorage.setItem('sanad_customers', JSON.stringify(allCustomers));
      showCustomers();
    }

    function updateCustSelect() {
      var select = document.getElementById('inv-customer');
      var html = '';
      for(var i=0; i<allCustomers.length; i++) {
        html += '<option>' + allCustomers[i].name + '</option>';
      }
      select.innerHTML = html;
    }

    // ========== Ø§Ù„ÙØ§ØªÙˆØ±Ø© ==========
    function addItemToInvoice() {
      var itemId = document.getElementById('inv-item').value;
      var qty = parseInt(document.getElementById('inv-qty').value) || 1;
      var customPrice = parseFloat(document.getElementById('inv-price').value) || 0;
      
      if(!itemId) {
        alert('âŒ Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ø¯ Ø£ÙˆÙ„Ø§Ù‹');
        return;
      }
      
      var item = null;
      for(var i=0; i<allItems.length; i++) {
        if(allItems[i].id == itemId) {
          item = allItems[i];
          break;
        }
      }
      if(!item) return;
      
      var price = customPrice > 0 ? customPrice : item.price;
      
      currentItems.push({
        name: item.name,
        price: price,
        qty: qty,
        total: price * qty
      });
      
      showInvoiceItems();
      
      document.getElementById('inv-item').value = '';
      document.getElementById('inv-qty').value = '1';
      document.getElementById('inv-price').value = '';
    }

    function showInvoiceItems() {
      var box = document.getElementById('invoice-items-box');
      var tbody = document.
